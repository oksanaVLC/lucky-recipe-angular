<div class="wrapper">
  <div class="my-recipes">
    <div class="title-row">
      <app-back-button-small></app-back-button-small>

      <h1 class="gold-gradient">Mis recetas creadas ({{ recipes.length }})</h1>
    </div>

    <!-- Botones de vista -->
    <div class="botones-vista">
      <svg
        (click)="viewMode = 'grid'"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <rect x="3" y="3" width="7" height="7" />
        <rect x="14" y="3" width="7" height="7" />
        <rect x="3" y="14" width="7" height="7" />
        <rect x="14" y="14" width="7" height="7" />
      </svg>

      <svg
        (click)="viewMode = 'list'"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="16"
        viewBox="0 0 24 16"
        fill="currentColor"
      >
        <!-- Primer bullet -->
        <circle cx="2" cy="2" r="2" />
        <rect x="6" y="0.5" width="18" height="3" rx="1" />
        <!-- Segundo bullet -->
        <circle cx="2" cy="8" r="2" />
        <rect x="6" y="6.5" width="18" height="3" rx="1" />
        <!-- Tercer bullet -->
        <circle cx="2" cy="14" r="2" />
        <rect x="6" y="12.5" width="18" height="3" rx="1" />
      </svg>
    </div>

    <!-- Mostrar componente hijo según vista -->
    <ng-container *ngIf="recipes.length; else emptyList">
      @defer (on viewport) {
        <app-my-recipes-grid
          *ngIf="viewMode === 'grid'"
          [recipes]="recipes"
          (view)="viewRecipe($event)"
          (edit)="editRecipe($event)"
          (delete)="deleteRecipe($event)"
          [@gridAnimation]
        ></app-my-recipes-grid>
      } @placeholder {
        <div class="recipe-card placeholder">Cargando recetas...</div>
      }

      <app-my-recipes-list
        *ngIf="viewMode === 'list'"
        [recipes]="recipes"
        (view)="viewRecipe($event)"
        (edit)="editRecipe($event)"
        (delete)="deleteRecipe($event)"
      ></app-my-recipes-list>
    </ng-container>

    <ng-template #emptyList>
      <p>No has creado ninguna receta todavía.</p>
    </ng-template>
  </div>
</div>
