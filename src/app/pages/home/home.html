<div class="wrapper">
  <!-- Barra de búsqueda reutilizable -->
  <app-search-bar (search)="searchTerm = $event"></app-search-bar>

  <!-- Scrollable bar de categorías -->
  <div class="scrollmenu">
    <a href="#">Destacados</a>
    <a href="#">Fáciles</a>
    <a href="#">Desayuno</a>
    <a href="#">Repostería</a>
    <a href="#">Últimas</a>
    <a href="#">Más populares</a>
    <a href="#">Veganos</a>
    <a href="#">Para niños</a>
  </div>

  <!-- Hero image -->
  <div class="hero-image">
    <img
      src="assets/images/hero-image.webp"
      alt="Hero image"
      class="hero-picture responsive-image"
    />

    <!-- SMOKE -->
    <div class="smoke-container">
      <div class="smoke-wrap">
        <img class="smoke" src="assets/images/vapor.webp" alt="smoke" />
      </div>
      <div class="smoke-wrap">
        <img class="smoke2" src="assets/images/vapor.webp" alt="smoke" />
      </div>
      <div class="smoke-wrap">
        <img class="smoke3" src="assets/images/vapor.webp" alt="smoke" />
      </div>
    </div>

    <!-- CONTENIDO -->
    <div class="content-container">
      <div class="hero-text">
        <h1 class="hero-title">
          Elige tu receta <br />
          del día:
        </h1>

        <button class="arrow-button" (click)="chooseRandomRecipe()">
          <span class="gold-gradient-suerte">¡Suerte!</span>
          <span class="arrow">→</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Overlay Loader -->
  <app-loader *ngIf="isLoading"></app-loader>

  <!-- Grid de recetas -->

  <h1 class="decorated-title scroll-animate">Recetas destacadas</h1>

  <div class="recipe-grid">
    <ng-container *ngFor="let recipe of paginatedRecipes; let i = index; trackBy: trackByRecipeId">
      @defer (on viewport) {
        <app-recipe-card
          [recipe]="recipe"
          [truncateShortDescription]="true"
          [shortDescriptionLength]="20"
          class="stagger-card"
          [style.animationDelay.ms]="i * 100"
        >
        </app-recipe-card>
      } @placeholder {
        <div class="recipe-card placeholder">Cargando…</div>
      }
    </ng-container>
  </div>

  <!-- Recetas del Mundo -->
  <h1 class="decorated-title scroll-animate">Recetas del mundo</h1>

  <div class="country-cards-grid">
    <ng-container *ngFor="let country of countries; let i = index">
      @defer (on viewport) {
        <a href="#" class="country-card stagger-card" [style.animationDelay.ms]="i * 100">
          <img [src]="country.img" [alt]="country.name" />
          <div class="country-name">{{ country.name }}</div>
        </a>
      } @placeholder {
        <div class="country-card placeholder">Cargando…</div>
      }
    </ng-container>
  </div>

  <h1 class="decorated-title scroll-animate">Descubre más</h1>

  <!-- Paginación -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">◀</button>

    <button
      *ngFor="let p of [].constructor(totalPages); let i = index"
      (click)="changePage(i + 1)"
      [class.active]="currentPage === i + 1"
    >
      {{ i + 1 }}
    </button>

    <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">▶</button>
  </div>
</div>
