<div *ngIf="recipe as r; else notFound" class="recipe-detail">
  <div class="celebration">ğŸŒ± Tu receta saludable del dÃ­a</div>

  <!-- CARD -->
  <article class="recipe-card">
    <!-- IMAGEN -->
    <div class="image-container">
      <img [src]="r.image" [alt]="r.title" class="main-image" />

      <!-- Rating -->
      <div class="rating">
        <span
          class="star"
          *ngFor="let star of stars; let i = index"
          [class.filled]="i < (r.rating ?? 0)"
        >
          â˜…
        </span>
      </div>

      <!-- Compartir -->
      <button class="share-icon" (click)="shareRecipe()" aria-label="Compartir">ğŸ”—</button>

      <!-- Like -->
      <button
        class="like-fab"
        [class.active]="isFavorite"
        (click)="toggleFavorite()"
        aria-label="Me gusta"
      >
        â¤ï¸ <span class="likes-count">{{ r.likes ?? 0 }}</span>
      </button>
    </div>

    <!-- CONTENIDO -->
    <div class="card-content">
      <h1>{{ r.title }}</h1>
      <p class="description">{{ r.description }}</p>

      <!-- Autor -->
      <div class="author">
        <img src="assets/images/profile.jpg" alt="Autor" class="avatar" />
        <div class="author-info">
          <span class="author-name">{{ r.author?.name }}</span>
          <a class="author-link" [routerLink]="['/perfil', r.author?.id]"> Ver sus recetas </a>
        </div>
      </div>

      <!-- Ingredientes -->
      <h3>Ingredientes</h3>
      <ul>
        <li *ngFor="let ingredient of r.ingredients">{{ ingredient }}</li>
      </ul>
    </div>
  </article>

  <button class="back-button" routerLink="/inicio">â† Volver</button>
</div>

<ng-template #notFound>
  <div class="recipe-not-found">
    <p>Esta receta no existe o ya no estÃ¡ disponible.</p>
    <button class="back-button" routerLink="/inicio">â† Volver al inicio</button>
  </div>
</ng-template>
